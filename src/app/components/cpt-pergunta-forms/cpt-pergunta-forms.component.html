<div class="form-container">
  <h1 class="form-title">{{ titulo }}</h1>

  <!-- Usando ngForm para Template-Driven Forms -->
  <form #questionForm="ngForm" (ngSubmit)="onSubmit(questionForm)" class="question-form">
    <div class="card">
      <!-- Cabeçalho: Matéria e Quantidade de Alternativas -->
      <div class="header-group">
        <div class="form-group materia-group">
          <label for="materia">Matéria</label>
          <!-- ngModel para two-way binding com formModel.materia -->
          <select id="materia" name="materia" [(ngModel)]="formModel.materia" required class="form-control">
            <!-- Opções de exemplo. -->
            <option [ngValue]="''" disabled>Selecione a Matéria</option>
            <option value="Java">Java</option>
            <option value="Angular">Angular</option>
            <option value="TypeScript">TypeScript</option>
          </select>
          <!-- Validação no template -->
          <div *ngIf="questionForm.controls['materia']?.invalid && questionForm.controls['materia']?.touched" class="error-message">
            Matéria é obrigatória.
          </div>
        </div>

        <div class="form-group quantidade-group">
          <!-- Título corrigido para "Quantidade de Alternativas" -->
          <label>Quantidade de Alternativas</label>
          <div class="question-count-selector">
            <!-- Iteração sobre o array de contagens [4, 5] -->
            <span
              *ngFor="let count of alternativaCounts"
              [class.active]="formModel.quantidadeAlternativas === count"
              (click)="setQuantidadeAlternativas(count)"
            >
              {{ count }}
            </span>
          </div>
          <!-- Campo oculto para garantir que o valor seja enviado no formModel -->
          <input type="hidden" name="quantidadeAlternativas" [(ngModel)]="formModel.quantidadeAlternativas">
        </div>
      </div>

      <!-- Questão (Corpo da Pergunta) -->
      <div class="form-group">
        <label for="textoQuestao">Questão</label>
        <!-- ngModel para two-way binding com formModel.textoQuestao -->
        <!-- O estilo será ajustado no SCSS para melhor visualização -->
        <textarea id="textoQuestao" name="textoQuestao" [(ngModel)]="formModel.textoQuestao" required class="form-control question-textarea" rows="5" placeholder="Digite o texto da questão..."></textarea>
        <div *ngIf="questionForm.controls['textoQuestao']?.invalid && questionForm.controls['textoQuestao']?.touched" class="error-message">
          O texto da questão é obrigatório.
        </div>
      </div>

      <!-- Alternativas -->
      <div class="form-group">
        <label>Alternativas</label>
        <div class="alternativas-list">
          <!-- Iteração sobre o array de alternativas, limitando pela quantidade selecionada -->
          <div *ngFor="let alternativa of formModel.alternativas; let i = index" class="alternativa-item">
            <!-- Exibe apenas as alternativas até o limite selecionado -->
            <ng-container *ngIf="i < formModel.quantidadeAlternativas">
              <input type="text" name="alternativa-{{i}}" [(ngModel)]="alternativa.texto" required class="form-control alternativa-input" placeholder="Texto da alternativa">
              <div *ngIf="questionForm.controls['alternativa-' + i]?.invalid && questionForm.controls['alternativa-' + i]?.touched" class="error-message">
                O texto da alternativa é obrigatório.
              </div>
            </ng-container>
          </div>
        </div>

      </div>

      <!-- A seção "Resposta" foi omitida conforme solicitado pelo usuário. -->

    </div>

    <!-- Botão de Ação -->
    <div class="action-row">
      <button type="submit" [disabled]="questionForm.invalid" class="submit-btn">
        {{ textoBotao }}
      </button>
    </div>
  </form>
</div>
