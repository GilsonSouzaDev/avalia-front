<div class="alternativa-item">

  <!-- MODO VISUALIZAÇÃO -->
  <ng-container *ngIf="!editMode; else editBlock">
    <span class="alternativa-texto">{{ alternativa.texto || '— sem texto —' }}</span>

    <div class="actions" *ngIf="editavel">
      <!-- Botão Editar: Azul Transparente (Igual ao do Card) -->
      <button
        mat-icon-button
        color="primary"
        (click)="habilitarEdicao(); $event.stopPropagation()"
        matTooltip="Editar alternativa">
        <mat-icon>edit</mat-icon>
      </button>
    </div>
  </ng-container>

  <!-- MODO EDIÇÃO -->
  <ng-template #editBlock>
    <input
      type="text"
      [(ngModel)]="textoTemp"
      class="alternativa-input"
      placeholder="Digite o texto da alternativa..."
      (click)="$event.stopPropagation()"
      (keydown.enter)="confirmarEdicao()"
      (keydown.escape)="cancelarEdicao()"
      autoFocus
    />

    <div class="actions">
      <!-- Botão Salvar (Check) -->
      <button
        mat-icon-button
        class="btn-save"
        (click)="confirmarEdicao(); $event.stopPropagation()">
        <mat-icon>check</mat-icon>
      </button>

      <!-- Botão Cancelar (X) - Vermelho -->
      <button
        mat-icon-button
        color="warn"
        (click)="cancelarEdicao(); $event.stopPropagation()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </ng-template>

</div>
