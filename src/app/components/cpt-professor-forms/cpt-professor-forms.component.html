<div class="form-container">
  <h3>{{ editando ? 'Atualizar' : 'Cadastrar' }}</h3>

  <form #profForm="ngForm" (ngSubmit)="onSubmit(profForm)">

    <!-- NOME -->
    <div class="campo">
      <label for="nome">Nome</label>
      <input
        type="text"
        id="nome"
        name="nome"
        [(ngModel)]="nome"
        required
      />
    </div>

    <!-- EMAIL -->
    <div class="campo">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="email"
        required
      />
    </div>

    <!-- SENHA -->
    <div class="campo">
      <label for="senha">{{ editando ? 'Nova Senha (Opcional)' : 'Senha' }}</label>

      <!-- Wrapper para posicionar o ícone -->
      <div class="input-wrapper">
        <input
          [type]="ocultarSenha ? 'password' : 'text'"
          id="senha"
          name="senha"
          [(ngModel)]="senha"
          (input)="validarSenhas()"
          [required]="!editando"
          placeholder="Digite a senha"
        />
        <!-- Botão do Olho -->
        <button
          type="button"
          class="btn-eye"
          (click)="ocultarSenha = !ocultarSenha"
          tabindex="-1">
          <mat-icon>{{ ocultarSenha ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      </div>
    </div>

    <!-- CONFIRMAR SENHA -->
    <div class="campo" *ngIf="senha">
      <label for="confirmarSenha">Confirmar Senha</label>

      <div class="input-wrapper">
        <input
          [type]="ocultarConfirmacao ? 'password' : 'text'"
          id="confirmarSenha"
          name="confirmarSenha"
          [(ngModel)]="confirmarSenha"
          (input)="validarSenhas()"
          [required]="!editando"
          placeholder="Confirme a senha"
        />
        <!-- Botão do Olho -->
        <button
          type="button"
          class="btn-eye"
          (click)="ocultarConfirmacao = !ocultarConfirmacao"
          tabindex="-1">
          <mat-icon>{{ ocultarConfirmacao ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      </div>

      <div *ngIf="erroSenha" class="erro-senha">{{ erroSenha }}</div>
    </div>

    <!-- DISCIPLINAS -->
    <div class="campo" *ngIf="mostrarDisciplinas">
      <label>Disciplinas</label>
      <div class="disciplinas-grid">
        <label
          *ngFor="let d of disciplinasDisponiveis()"
          class="disciplina-item"
        >
          <input
            type="checkbox"
            [checked]="isDisciplinaSelecionada(d)"
            (change)="onDisciplinaChange($event, d)"
          />
          {{ d.nome }}
        </label>
      </div>
    </div>

    <!-- AÇÕES -->
    <div class="form-actions">
      <button
        type="submit"
        class="btn-cadastrar"
        [disabled]="!isFormValid()"
      >
        {{ editando ? 'Atualizar' : 'Cadastrar' }}
      </button>

      <button
        type="button"
        class="btn-cancelar"
        (click)="cancelarCadastro()"
      >
        Cancelar
      </button>
    </div>
  </form>
</div>
