<mat-card class="card-disciplina"
[ngStyle]="{
    '--disc-color': disciplina.cor
  }">

  <div class="cabecalho" (click)="toggleExpand()">
    <h2 class="titulo">{{ disciplina.nome }}</h2>
    <mat-icon class="icone" [class.rotated]="expanded">expand_more</mat-icon>
  </div>

  <div class="conteudo-expandido" *ngIf="expanded">
    <ng-container *ngIf="perguntasDaDisciplina.length; else semPerguntas">

      <!--
        CORREÇÃO APLICADA:
        1. [userTipo]="userTipo" -> Passa o perfil (COORDENADOR/PROFESSOR) para o card
        2. (delete)="onDeletePergunta($event)" -> Escuta o pedido de exclusão vindo do card
      -->
      <app-cpt-card-pergunta
        *ngFor="let pergunta of paginatedPerguntas"
        [pergunta]="pergunta"
        [professores]="professores"
        [isSelectionMode]="isSelectionMode"
        [userTipo]="userTipo"

        [isSelected]="isQuestaoSelecionada(pergunta.id)"
        [isDisabled]="isQuestaoDesabilitada(pergunta.id)"

        (selectToggle)="onSelectToggle($event)"
        (edit)="onEdit($event)"
        (delete)="onDeletePergunta($event)"
        (editVariable)="onAtualizarAlternativa($event)"
        >
      </app-cpt-card-pergunta>

      <mat-paginator
        [length]="perguntasDaDisciplina.length"
        [pageSize]="pageSize"
        [pageIndex]="pageIndex"
        [pageSizeOptions]="[3, 5, 10]"
        (page)="onPageChange($event)">
      </mat-paginator>
    </ng-container>

    <ng-template #semPerguntas>
      <p class="mensagem-vazia">Nenhuma pergunta cadastrada.</p>
    </ng-template>
  </div>
</mat-card>
