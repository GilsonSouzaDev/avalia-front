<!-- src/app/pages/pgs-perfil-detalhes/pgs-perfil-detalhes.component.html -->

<!-- 1. Bloco principal: Renderiza somente se o professor estiver carregado -->
@if (professor(); as prof) {

  @if (!editando) {
    <!-- MODO DE VISUALIZAÇÃO -->
    <section class="pgs-perfil-detalhes">
      <app-cpt-perfil-datalhes [professor]="prof"></app-cpt-perfil-datalhes>

      <div class="buttons-perfil">
        <button class="buttons-perfil__editar" (click)="alternarEdicao()">
          Editar
        </button>
        <button class="buttons-perfil__excluir" (click)="excluirPerfil()">
          Excluir
        </button>
      </div>
    </section>
  } @else {
    <!-- MODO DE EDIÇÃO -->
    <section class="perfil-edicao">
      <!-- A variável 'prof' está disponível aqui e é passada para o formulário -->
      <app-cpt-professor-forms
        [professor]="prof"
        (salvar)="atualizarPerfil($event)"
        [mostrarDisciplinas]="mostrarDisciplinas"
        (cancelar)="alternarEdicao()"
      ></app-cpt-professor-forms>

      </section>
  }

} @else {
  <!-- Opcional: Mensagem de carregamento enquanto os dados do perfil não chegam do AuthService -->
  <p>Carregando dados do perfil...</p>
}
