<!-- src/app/pages/pgs-perfil-detalhes/pgs-perfil-detalhes.component.html -->

@if (professor(); as prof) {

  <!-- MODO VISUALIZAÇÃO -->
  @if (!editando) {
    <section class="pgs-perfil-detalhes">
      <app-cpt-perfil-datalhes [professor]="prof"></app-cpt-perfil-datalhes>

      <div class="buttons-perfil">
        <button class="buttons-perfil__editar" (click)="alternarEdicao()">
          Editar Perfil
        </button>
        @if (podeExcluir) {
          <button class="buttons-perfil__excluir" (click)="excluirPerfil()">
            Excluir
          </button>
}
      </div>
    </section>
  }

  <!-- MODO EDIÇÃO -->
  @else {
    <section class="perfil-edicao">
      <!--
         'prof' aqui é garantido como objeto Professor completo.
         Os eventos (salvar) e (cancelar) chamam as funções do pai.
      -->
      <app-cpt-professor-forms
        [professor]="prof"
        [mostrarDisciplinas]="mostrarDisciplinas"
        (salvar)="atualizarPerfil($event)"
        (cancelar)="alternarEdicao()"
      ></app-cpt-professor-forms>
    </section>
  }

} @else {
  <!-- Feedback visual enquanto o signal é null -->
  <div class="loading-container">
    <p>Carregando dados do perfil...</p>
  </div>
}
